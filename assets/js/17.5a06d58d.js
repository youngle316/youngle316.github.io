(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{379:function(t,_,v){"use strict";v.r(_);var a=v(18),s=Object(a.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"使用hackintool定制usb3-0"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用hackintool定制usb3-0"}},[t._v("#")]),t._v(" 使用Hackintool定制USB3.0")]),t._v(" "),v("p",[t._v("在macos10.10.X之后，USB最多只能驱动15个端口，多了就没有反应，所以需要使用USB端口限制补丁。但是每当系统更新后这些补丁就会失效，并且使用补丁也会有睡眠问题。所以为了一劳永逸，就需要自己去定制自己电脑的USB，使得可以正常驱动USB3.0并且保证睡眠正常。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/Zzn8ln.md.png",alt:"usb"}})]),t._v(" "),v("p",[t._v("驱动成功的USB如上图所示，总共只能有15个端口，"),v("code",[t._v("HS")]),t._v("开头为USB2.0，速度为480m/s；"),v("code",[t._v("SS")]),t._v("开头为USB3.0，速度为5Gb/s，其中"),v("code",[t._v("HS13")]),t._v("为蓝牙。")]),t._v(" "),v("h2",{attrs:{id:"_1-工具下载"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-工具下载"}},[t._v("#")]),t._v(" 1. 工具下载")]),t._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"http://headsoft.com.au/download/mac/Hackintool.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hackintool"),v("OutboundLink")],1)]),t._v(" "),v("li",[v("a",{attrs:{href:"https://bitbucket.org/RehabMan/os-x-usb-inject-all/downloads/",target:"_blank",rel:"noopener noreferrer"}},[t._v("USBInjectAll.kext"),v("OutboundLink")],1)]),t._v(" "),v("li",[t._v("Clover Configuration")]),t._v(" "),v("li",[t._v("Kext Utility")])]),t._v(" "),v("h2",{attrs:{id:"_2-驱动方法"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-驱动方法"}},[t._v("#")]),t._v(" 2. 驱动方法")]),t._v(" "),v("h3",{attrs:{id:"_2-1-发现端口"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-发现端口"}},[t._v("#")]),t._v(" 2.1 发现端口")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("将 "),v("code",[t._v("USBInjectAll.kext")]),t._v(" (用于端口发现) 放入 "),v("code",[t._v("EFI/CLOVER/kexts/Other")])])]),t._v(" "),v("li",[v("p",[t._v("Clover ▸ DSDT 重命名 (如果需要)")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("方法一：使用Clover Configuration手动添加")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzGwt0.png",alt:"acpi1"}})])]),t._v(" "),v("li",[v("p",[t._v("方法二：使用Hackintool")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzJ7GV.md.png",alt:"ZzJ7GV.md.png"}})]),t._v(" "),v("p",[t._v("确认后会提示是否替换原有"),v("code",[t._v("config.plist")]),t._v("。")])])])]),t._v(" "),v("li",[v("p",[t._v("使用Kext Utility重建缓存，重新启动")])])]),t._v(" "),v("h3",{attrs:{id:"_2-2-驱动usb2-0"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-驱动usb2-0"}},[t._v("#")]),t._v(" 2.2 驱动USB2.0")]),t._v(" "),v("p",[t._v("记住，USB2.0和3.0总共的端口数最多是15个。所以要提前算好哪些端口需要驱动，哪些不需要了要舍弃掉。例如我的主板有6个USB3.0，两个USB2.0，我的机箱有两个USB3.0，一个蓝牙USB2.0端口，没有typec接口。（驱动成功的USB3.0算"),v("strong",[t._v("两个")]),t._v("端口，USB2.0算"),v("strong",[t._v("一个")]),t._v("端口）。如果我全部驱动成功的话就是8*2+2+1=19个端口。已经超过了15个端口的限制，所以我必须得舍弃一些端口。我的方案是舍弃了主板上的两个USB3.0，这样就只剩下了15个端口，很合理👍")]),t._v(" "),v("p",[t._v("首先先驱动你需要的USB2.0。")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("重启之后切换到Hackintool->USB，点击下面的清空全部，再刷新。就会显示你主板ID对应的所有USB接口。我的如下所示")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzRYGT.md.png",alt:"ZzRYGT.md.png"}})])]),t._v(" "),v("li",[v("p",[t._v("使用USB2.0U盘将每个接口都插拔一遍，插上的会显示为绿色。然后将端口号名称与自己的端口位置对应起来，用本子记录📝。（如："),v("code",[t._v("HS03")]),t._v("对应主板上右侧2.0端口）")])]),t._v(" "),v("li",[v("p",[t._v("将没有变为绿色的接口全部删除。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/Zzftu4.md.png",alt:"Zzftu4.md.png"}})])]),t._v(" "),v("li",[v("p",[t._v("在clover中添加引导参数"),v("code",[t._v("-uia_exclude_hs uia_include=HS03,HS04")]),t._v("。意思是下次启动不包括hs即2.0端口，除了"),v("code",[t._v("HS03,HS04")]),t._v(",要不然下次启动键盘和鼠标都不能用了。添加成功后保存重启。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzhS2T.md.png",alt:"ZzhS2T.md.png"}})])])]),t._v(" "),v("h3",{attrs:{id:"_2-3-驱动usb3-0"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-驱动usb3-0"}},[t._v("#")]),t._v(" 2.3 驱动USB3.0")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("重启之后的界面。显示了已驱动的2.0和所有的3.0接口。"),v("strong",[t._v("不要")]),t._v("🈲️去按刷新和清除所有接口。要不然2.0端口就不显示了，得重新来过。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzhTF1.md.png",alt:"ZzhTF1.md.png"}})])]),t._v(" "),v("li",[v("p",[t._v("再使用USB3.0的U盘去插拔每一个USB3.0的端口，并记录端口名称与其对应的位置。将没有变绿的端口删掉。最终结果如下：")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/Zz4xjU.md.png",alt:"Zz4xjU.md.png"}})])]),t._v(" "),v("li",[v("p",[t._v("如上图所示为所有驱动的端口，但是macos限制🚫15个端口，上面共有19个，所以我删除了我主板最下方的两个USB3.0端口。这两个端口对应的ss为SS05和SS06，hs对应为HS05和HS06。你的肯定和我不一样，所以需要在前面插拔的时候记录好。删掉这四个接口，就剩下了15个，很稳。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/Zz505n.md.png",alt:"Zz505n.md.png"}})])]),t._v(" "),v("li",[v("p",[t._v("由于我的主板和机箱没有USB typec接口，所以没法演示typec。USB Type-C接口的设备需要正反两面对所有的端口进行插拔一遍。")])]),t._v(" "),v("li",[v("p",[t._v("上面这15个端口就是最终要驱动的端口。接下来需要更改一下连接器类型。")]),t._v(" "),v("ul",[v("li",[t._v("永久连接设备的USB端口（例如M.2蓝牙卡）应设置为 "),v("code",[t._v("Internal")]),t._v(" (内建)")]),t._v(" "),v("li",[t._v("与 USB3 端口相连的 HSxx 端口 (USB2) 应设置为 "),v("code",[t._v("USB3")])]),t._v(" "),v("li",[t._v("内部集线器通常连接到端口PR11和PR21，因此应设置为 "),v("code",[t._v("Internal")]),t._v(" (内建)")]),t._v(" "),v("li",[t._v("USB Type-C 接口可以是9或10，这取决于硬件如何处理 USB Type-C 型设备/电缆的"),v("strong",[t._v("正反两种可能方向")])]),t._v(" "),v("li",[t._v("如果 USB Type-C 在两个方向上使用相同的 SSxx，则它具有内建切换器，因此应设置为 "),v("code",[t._v("TypeC+Sw")])]),t._v(" "),v("li",[t._v("如果 USB Type-C 在两个方向使用不同的 SSxx，则它没有内建切换器，因此应设置为 "),v("code",[t._v("TypeC")])])])])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzImR0.md.png",alt:"ZzImR0.md.png"}})]),t._v(" "),v("h3",{attrs:{id:"_2-4-导出文件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-导出文件"}},[t._v("#")]),t._v(" 2.4 导出文件")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzI3dJ.md.png",alt:"ZzI3dJ.md.png"}})]),t._v(" "),v("p",[t._v("确定好15个端口并且将端口的类型修改成功后就可以导出了。默认导出到桌面上。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://s2.ax1x.com/2019/07/20/ZzIwLD.png",alt:"ZzIwLD.png"}})]),t._v(" "),v("ul",[v("li",[v("p",[t._v("复制 "),v("code",[t._v("SSDT-EC.aml")]),t._v(" (如果有) 到 EFI ▸ CLOVER ▸ ACPI ▸ patched")])]),t._v(" "),v("li",[v("p",[t._v("接下来的方案请")]),t._v(" "),v("p",[t._v("2 选 1")]),t._v(" "),v("ul",[v("li",[t._v("A) 复制 USBPorts.kext 到 EFI ▸ CLOVER ▸ kexts ▸ Other；或者")]),t._v(" "),v("li",[t._v("B) 复制 SSDT-UIAC.aml 和 SSDT-USBX.aml (如果有) 到 EFI ▸ CLOVER ▸ ACPI ▸ patched")])])])]),t._v(" "),v("p",[t._v("我使用的是"),v("code",[t._v("USBPorts.kext")]),t._v("。")]),t._v(" "),v("p",[t._v("最后将不需要的文件和补丁删除")]),t._v(" "),v("ul",[v("li",[t._v("删除 ("),v("code",[t._v("-uia_exclude_ss")]),t._v("，"),v("code",[t._v("-uia_exclude_hs")]),t._v(" 和 "),v("code",[t._v("uia_include=x")]),t._v(")等引导参数。")]),t._v(" "),v("li",[t._v("删除 "),v("code",[t._v("USBInjectAll.kext")]),t._v(" （"),v("strong",[t._v("如果使用的是 USBPorts")]),t._v("）")])]),t._v(" "),v("p",[t._v("使用的是"),v("code",[t._v("USBPorts.kext")]),t._v("的话，需要使用"),v("code",[t._v("Kext Utility")]),t._v("重建缓存。")]),t._v(" "),v("p",[t._v("接着重启。")]),t._v(" "),v("h3",{attrs:{id:"_2-5-验证"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-验证"}},[t._v("#")]),t._v(" 2.5 验证")]),t._v(" "),v("p",[t._v("重启后使用Hackintool清空全部接口再刷新看和自己定制的接口有出入吗，如果有的话，就要看是哪里出问题了。如果正常的话，可以用U盘去试试端口了。")]),t._v(" "),v("h2",{attrs:{id:"_3-鸣谢"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-鸣谢"}},[t._v("#")]),t._v(" 3. 鸣谢")]),t._v(" "),v("p",[t._v("本教程是根据黒果小兵的"),v("a",{attrs:{href:"https://blog.daliansky.net/Intel-FB-Patcher-tutorial-and-insertion-pose.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客"),v("OutboundLink")],1),t._v("完成的。")])])}),[],!1,null,null,null);_.default=s.exports}}]);